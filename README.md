# 빛 추적 스마트 전력 제어 시스템

> 태양의 위치를 실시간으로 추적하여 태양광 발전 효율을 극대화하고,  
> 사용자 제어 기반의 스마트 플러그를 통해 전력 소비를 관리하는 IoT 시스템

---

## 프로젝트 개요

빛 추적 스마트 전력 제어 시스템은 CDS 센서를 이용해 일조량을 측정하고 태양광 패널의 방향을 자동으로 조절하여 발전 효율을 높이는 동시에, 서버와 연동된 스마트 콘센트를 통해 전력 사용을 원격으로 제어하는 스마트 전력 제어 시스템입니다.

---

## 프로젝트 목표

- CDS 센서를 이용한 실시간 일조량 측정
- 모터 제어를 통한 태양광 패널 자동 방향 조정
- 패널 방향, 조도, 발전량 데이터 서버 실시간 전송
- 사용자 명령 기반 스마트 콘센트 개폐 제어
- LCD를 통한 시스템 상태 시각화
- 발전 효율 향상 및 에너지 소비 관리

---

## 시스템 구성

### 전체 구조

- **태양광 발전부**
  - NUCLEO-F411RE
  - CDS 센서
  - 스텝 모터
  - ESP-01 (WiFi)

- **서버**
  - Raspberry Pi 5
  - MariaDB
  - phpMyAdmin

- **출력 및 사용자 제어**
  - Arduino UNO
  - LCD
  - 릴레이 모듈
  - HC-06 (Bluetooth)

---

## 동작 방식

1. CDS 센서로 일조량 측정
2. 최적의 태양 방향으로 모터 제어
3. 조도 값, 패널 방향, 발전 전압을 WiFi로 서버에 전송
4. Raspberry Pi에서 데이터 수신 후 DB 저장
5. Arduino가 서버에 주기적으로 데이터 요청
6. LCD에 발전 상태 및 콘센트 상태 출력
7. 사용자가 스마트폰으로 명령 입력 → 콘센트 제어

---

## 사용 기술 스택

### Hardware
- NUCLEO-F411RE
- Arduino UNO
- Raspberry Pi 5
- CDS Sensor
- Step Motor
- Relay Module
- LCD
- ESP-01, HC-06

### Software
- C / C++
- MariaDB
- phpMyAdmin
- Serial / UART / I2C / ADC
- WiFi & Bluetooth 통신

---

## 데이터 관리

- 센서 데이터 및 상태 정보는 MariaDB에 실시간 저장
- 서버에서 데이터 시각화 가능
- 발전량 및 패널 방향 추이 분석 가능

---

## 한계 및 개선 사항

- 패널 회전 시 전압 강하로 조도 신뢰도 저하 → 전원 분리로 부분 개선
- ESP-01 통신 안정성 문제 → 전용 타이머 사용 및 논블로킹 처리로 개선